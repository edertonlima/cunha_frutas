/* AmyTheme Framework | A Lightweight and easy-to-use WordPress Options Framework - v1.0.0*/
;!function(e,t,a,n){"use strict";e.AMYFRAMEWORK=e.AMYFRAMEWORK||{};var i=e("body"),o=i.hasClass("rtl");e.AMYFRAMEWORK.MEGAMENU=function(t){var a=this;a.$el=e(t),a.el=t,a.$el.data("AMYFRAMEWORK.MEGAMENU",a),a.init=function(){var t=0,n=a.$el;n.on("click",".is-mega",function(){a.flush(e(this)),a.depends(n)}),n.on("mouseup",".menu-item-bar",function(){clearTimeout(t),t=setTimeout(function(){a.depends()},50)}),n.on("change",".is-width",function(){var t=e(this),a=t.closest(".amy-mega-menu");"custom"==t.val()||"natural"==t.val()?a.find(".mega-depend-position").removeClass("hidden"):a.find(".mega-depend-position").addClass("hidden"),"custom"==t.val()?a.find(".mega-depend-width").removeClass("hidden"):a.find(".mega-depend-width").addClass("hidden")}),e(".is-width").trigger("change"),a.depends()},a.depends=function(){var t=a.$el;t.find(".is-mega").each(function(){a.flush(e(this))}),e("li",t).removeClass("active-mega-column").removeClass("active-sub-mega-column");var n=e(".active-mega-menu",t).nextUntil(".menu-item-depth-0","li");n.closest("li.menu-item-depth-1").addClass("active-mega-column"),n.closest("li:not(.menu-item-depth-1)").addClass("active-sub-mega-column")},a.flush=function(e){e.is(":checked")?(e.closest("li").addClass("active-mega-menu"),e.closest("li").find(".field-mega-width").removeClass("hidden")):(e.closest("li").find(".field-mega-width").addClass("hidden"),e.closest("li").removeClass("active-mega-menu"))},a.init()},e.fn.AMYFRAMEWORK_MEGAMENU=function(){return this.each(function(){new e.AMYFRAMEWORK.MEGAMENU(this)})},e.fn.AMYFRAMEWORK_TAB_NAVIGATION=function(){return this.each(function(){var t=e(this),a=t.find(".amy-nav"),n=t.find(".amy-reset"),i=t.find(".amy-expand-all");a.find("ul:first a").on("click",function(t){t.preventDefault();var i=e(this),o=i.next(),l=i.data("section");o.is("ul")?(o.slideToggle("fast"),i.closest("li").toggleClass("amy-tab-active")):(e("#amy-tab-"+l).fadeIn("fast").siblings().hide(),a.find("a").removeClass("amy-section-active"),i.addClass("amy-section-active"),n.val(l))}),i.on("click",function(a){a.preventDefault(),t.find(".amy-body").toggleClass("amy-show-all"),e(this).find(".fa").toggleClass("fa-eye-slash").toggleClass("fa-eye")})})},e.AMYFRAMEWORK.DEPENDENCY=function(t,a){var i=this;i.$el=e(t),i.el=t,i.init=function(){i.ruleset=e.deps.createRuleset();var t={show:function(e){e.removeClass("hidden")},hide:function(e){e.addClass("hidden")},log:!1,checkTargets:!1};a!==n?i.depSub():i.depRoot(),e.deps.enable(i.$el,i.ruleset,t)},i.depRoot=function(){i.$el.each(function(){e(this).find("[data-controller]").each(function(){var t=e(this),a=t.data("controller").split("|"),n=t.data("condition").split("|"),o=t.data("value").toString().split("|"),l=i.ruleset;e.each(a,function(e,a){var i=o[e]||"",s=n[e]||n[0];l=l.createRule('[data-depend-id="'+a+'"]',s,i),l.include(t)})})})},i.depSub=function(){i.$el.each(function(){e(this).find("[data-sub-controller]").each(function(){var t=e(this),a=t.data("sub-controller").split("|"),n=t.data("sub-condition").split("|"),o=t.data("sub-value").toString().split("|"),l=i.ruleset;e.each(a,function(e,a){var i=o[e]||"",s=n[e]||n[0];l=l.createRule('[data-sub-depend-id="'+a+'"]',s,i),l.include(t)})})})},i.init()},e.fn.AMYFRAMEWORK_DEPENDENCY=function(t){return this.each(function(){new e.AMYFRAMEWORK.DEPENDENCY(this,t)})},e.fn.AMYFRAMEWORK_CHOSEN=function(){return this.each(function(){var t=e(this);t.closest("#widget-list").length||t.chosen({allow_single_deselect:!0,disable_search_threshold:15,width:parseFloat(e(this).actual("width")+25)+"px"})})},e.fn.AMYFRAMEWORK_IMAGE_SELECTOR=function(){return this.each(function(){e(this).find("label").on("click",function(){e(this).siblings().find("input").prop("checked",!1)})})},e.fn.AMYFRAMEWORK_SORTER=function(){return this.each(function(){var t=e(this),a=t.find(".amy-enabled"),n=t.find(".amy-disabled");a.sortable({connectWith:n,placeholder:"ui-sortable-placeholder",update:function(e,t){var a=t.item.find("input");t.item.parent().hasClass("amy-enabled")?a.attr("name",a.attr("name").replace("disabled","enabled")):a.attr("name",a.attr("name").replace("enabled","disabled"))}}),n.sortable({connectWith:a,placeholder:"ui-sortable-placeholder"})})},e.fn.AMYFRAMEWORK_UPLOADER=function(){return this.each(function(){var t,a=e(this),n=a.find(".amy-add"),i=a.find("input");n.on("click",function(e){if(e.preventDefault(),"undefined"!=typeof wp&&wp.media&&wp.media.gallery){if(t)return void t.open();t=wp.media({title:n.data("frame-title"),library:{type:n.data("upload-type")},button:{text:n.data("insert-title")}}),t.on("select",function(){var e=t.state().get("selection").first();i.val(e.attributes.url).trigger("change")}),t.open()}})})},e.fn.AMYFRAMEWORK_IMAGE_UPLOADER=function(){return this.each(function(){var t,a=e(this),n=a.find(".amy-add"),i=a.find(".amy-image-preview"),o=a.find(".amy-remove"),l=a.find("input"),s=a.find("img");n.on("click",function(e){if(e.preventDefault(),"undefined"!=typeof wp&&wp.media&&wp.media.gallery){if(t)return void t.open();t=wp.media({library:{type:"image"}}),t.on("select",function(){var e=t.state().get("selection").first().attributes,a="undefined"!=typeof e.sizes.thumbnail?e.sizes.thumbnail.url:e.url;i.removeClass("hidden"),s.attr("src",a),l.val(e.id).trigger("change")}),t.open()}}),o.on("click",function(e){e.preventDefault(),l.val("").trigger("change"),i.addClass("hidden")})})},e.fn.AMYFRAMEWORK_IMAGE_GALLERY=function(){return this.each(function(){var t,a,n=e(this),i=n.find(".amy-edit"),o=n.find(".amy-remove"),l=n.find("ul"),s=n.find("input");n.find("img");n.on("click",".amy-add, .amy-edit",function(n){var c=e(this),r=c.hasClass("amy-edit")?"edit":"add",d="edit"===r?"gallery-edit":"gallery-library";if(n.preventDefault(),"undefined"!=typeof wp&&wp.media&&wp.media.gallery){if(t)return t.open(),void t.setState(d);t=wp.media({library:{type:"image"},frame:"post",state:"gallery",multiple:!0}),t.on("open",function(){var e=s.val();if(e){var a=e.split(","),n=t.state("gallery-edit").get("library");t.setState(d),a.forEach(function(e){var t=wp.media.attachment(e);n.add(t?[t]:[])})}}),t.on("update",function(){var e="",a=[],n=t.state().get("library");n.each(function(t){var n=t.attributes,i="undefined"!=typeof n.sizes.thumbnail?n.sizes.thumbnail.url:n.url;e+='<li><img src="'+i+'"></li>',a.push(n.id)}),s.val(a).trigger("change"),l.html("").append(e),o.removeClass("hidden"),i.removeClass("hidden")}),t.open(),a=r}}),o.on("click",function(e){e.preventDefault(),l.html(""),s.val("").trigger("change"),o.addClass("hidden"),i.addClass("hidden")})})},e.fn.AMYFRAMEWORK_TYPOGRAPHY=function(){return this.each(function(){var t=e(this),a=t.find(".amy-typo-family"),n=t.find(".amy-typo-variant"),i=t.find(".amy-typo-font");a.on("change",function(){var t=e(this),a=t.find(":selected").data("type")||"custom",o=t.find(":selected").data("variants");n.length&&(n.find("option").remove(),e.each(o.split("|"),function(e,t){n.append('<option value="'+t+'">'+t+"</option>")}),n.find('option[value="regular"]').attr("selected","selected").trigger("chosen:updated")),i.val(a)})})},e.fn.AMYFRAMEWORK_GROUP=function(){return this.each(function(){var t=e(this),a=t.find(".amy-groups"),n=t.find(".amy-accordion"),i=t.find(".amy-group:first").clone();n.length&&n.accordion({header:".amy-group-title",collapsible:!0,active:!1,animate:250,heightStyle:"content",icons:{header:"dashicons dashicons-arrow-right",activeHeader:"dashicons dashicons-arrow-down"},beforeActivate:function(t,a){e(a.newPanel).AMYFRAMEWORK_DEPENDENCY("sub")}}),a.sortable({axis:"y",handle:".amy-group-title",helper:"original",cursor:"move",placeholder:"widget-placeholder",start:function(e,t){var n=t.item.children(".amy-group-content");"block"===n.css("display")&&(n.hide(),a.sortable("refreshPositions"))},stop:function(e,t){t.item.children(".amy-group-title").triggerHandler("focusout"),n.accordion({active:!1})}});var o=0;e(".amy-add-group",t).on("click",function(e){e.preventDefault(),i.find("input, select, textarea").each(function(){this.name=this.name.replace(/\[(\d+)\]/,function(e,t){return"["+(parseInt(t,10)+1)+"]"})});var t=i.clone().removeClass("hidden");a.append(t),n.length&&(a.accordion("refresh"),a.accordion({active:t.index()})),a.find("input, select, textarea").each(function(){this.name=this.name.replace("[_nonce]","")}),t.AMYFRAMEWORK_DEPENDENCY("sub"),t.AMYFRAMEWORK_RELOAD_PLUGINS(),o++}),a.on("click",".amy-remove-group",function(t){t.preventDefault(),e(this).closest(".amy-group").remove()})})},e.fn.AMYFRAMEWORK_CONFIRM=function(){return this.each(function(){e(this).on("click",function(e){confirm("Are you sure?")||e.preventDefault()})})},e.fn.AMYFRAMEWORK_SAVE=function(){return this.each(function(){var t=e(this),n=t.data("save"),i=t.val(),o=e("#amy-save-ajax");e(a).on("keydown",function(e){(e.ctrlKey||e.metaKey)&&"s"===String.fromCharCode(e.which).toLowerCase()&&(e.preventDefault(),t.trigger("click"))}),t.on("click",function(a){if(o.length){"object"==typeof tinyMCE&&tinyMCE.triggerSave(),t.prop("disabled",!0).attr("value",n);var l=e("#amyframework_form").serialize();e.post("options.php",l).error(function(){alert("Error, Please try again.")}).success(function(){t.prop("disabled",!1).attr("value",i),o.hide().fadeIn().delay(250).fadeOut()}),a.preventDefault()}else t.addClass("disabled").attr("value",n)})})},e.fn.AMYFRAMEWORK_TAXONOMY=function(){return this.each(function(){var t=e(this),a=t.parent();if("addtag"===a.attr("id")){var n=a.find("#submit"),i=(a.find("#tag-name"),a.find(".amy-framework")),o=i.find(".amy-element").clone(),l=e("#the-list"),s=!1;n.on("click",function(){s||l.on("DOMNodeInserted",function(){s&&(i.empty(),i.html(o),o=o.clone(),i.AMYFRAMEWORK_RELOAD_PLUGINS(),i.AMYFRAMEWORK_DEPENDENCY(),s=!1)}),s=!0})}})},"undefined"!=typeof e.widget&&"undefined"!=typeof e.ui&&"undefined"!=typeof e.ui.dialog&&e.widget("ui.dialog",e.ui.dialog,{_createOverlay:function(){this._super(),this.options.modal&&this._on(this.overlay,{click:"close"})}}),e.AMYFRAMEWORK.ICONS_MANAGER=function(){var a,n=this,o=!0;n.init=function(){i.on("click",".amy-icon-add",function(n){n.preventDefault();var l=e(this),s=e("#amy-icon-dialog"),c=s.find(".amy-dialog-load"),r=(s.find(".amy-dialog-select"),s.find(".amy-dialog-insert"),s.find(".amy-icon-search"));a=l.closest(".amy-icon-select"),s.dialog({width:850,height:700,modal:!0,resizable:!1,closeOnEscape:!0,position:{my:"center",at:"center",of:t},open:function(){i.addClass("amy-icon-scrolling"),e(".ui-dialog-titlebar-close").addClass("ui-button"),e(t).on("resize",function(){var a=e(t).height(),n=Math.floor(a-237),i=Math.floor(a-125);s.dialog("option","height",i).parent().css("max-height",i),s.css("overflow","auto"),c.css("height",n)}).resize()},close:function(){i.removeClass("amy-icon-scrolling")}}),o&&e.ajax({type:"POST",url:ajaxurl,data:{action:"amy-get-icons"},success:function(t){c.html(t),o=!1,c.on("click","a",function(t){t.preventDefault();var n=e(this).data("amy-icon");a.find("i").removeAttr("class").addClass(n),a.find("input").val(n).trigger("change"),a.find(".amy-icon-preview").removeClass("hidden"),a.find(".amy-icon-remove").removeClass("hidden"),s.dialog("close")}),r.keyup(function(){var t=e(this).val(),a=c.find("a");a.each(function(){var a=e(this);a.data("amy-icon").search(new RegExp(t,"i"))<0?a.hide():a.show()})}),c.find(".amy-icon-tooltip").amytooltip({html:!0,placement:"top",container:"body"})}})}),i.on("click",".amy-icon-remove",function(t){t.preventDefault();var a=e(this),n=a.closest(".amy-icon-select");n.find(".amy-icon-preview").addClass("hidden"),n.find("input").val("").trigger("change"),a.addClass("hidden")})},n.init()},e.AMYFRAMEWORK.SHORTCODE_MANAGER=function(){var a,o=this;o.init=function(){var n,l,s,c,r,d=e("#amy-shortcode-dialog"),u=d.find(".amy-dialog-insert"),f=d.find(".amy-dialog-load"),h=d.find(".amy-dialog-select"),m=!1;i.on("click",".amy-shortcode",function(a){a.preventDefault(),h.AMYFRAMEWORK_CHOSEN(),c=e(this),m=c.hasClass("amy-shortcode-textarea"),r=c.data("editor-id"),d.dialog({width:850,height:700,modal:!0,resizable:!1,closeOnEscape:!0,position:{my:"center",at:"center",of:t},open:function(){i.addClass("amy-shortcode-scrolling"),e(".ui-dialog-titlebar-close").addClass("ui-button"),e(t).on("resize",function(){var a=e(t).height(),n=Math.floor(a-281),i=Math.floor(a-125);d.dialog("option","height",i).parent().css("max-height",i),d.css("overflow","auto"),f.css("height",n)}).resize()},close:function(){m=!1,i.removeClass("amy-shortcode-scrolling")}})}),h.on("change",function(){var t=e(this);n=t.val(),l=t.find(":selected").data("view"),n.length?e.ajax({type:"POST",url:ajaxurl,data:{action:"amy-get-shortcode",shortcode:n},success:function(t){f.html(t),u.parent().removeClass("hidden"),s=e(".amy-shortcode-clone",d).clone(),f.AMYFRAMEWORK_DEPENDENCY(),f.AMYFRAMEWORK_DEPENDENCY("sub"),f.AMYFRAMEWORK_RELOAD_PLUGINS()}}):(u.parent().addClass("hidden"),f.html(""))}),u.on("click",function(t){t.preventDefault();var i="",s="data-atts",u="data-clone-atts",f="data-clone-id";switch(l){case"contents":e("["+s+"]",".amy-dialog-load").each(function(){var t=e(this),a=t.data("atts");i+="["+a+"]",i+=t.val(),i+="[/"+a+"]"});break;case"clone":i+="["+n,e("["+s+"]",".amy-dialog-load .amy-element:not(.hidden)").each(function(){var t=e(this),a=t.data("atts");i+=o.validate_atts(a,t)}),i+="]",e("["+f+"]",".amy-dialog-load").each(function(){var t=e(this),a=t.data("clone-id");i+="["+a,e("["+u+"]",t.find(".amy-element").not(".hidden")).each(function(){var t=e(this),n=t.data("clone-atts");"content"!==n?i+=o.validate_atts(n,t):"content"===n&&(i+="]",i+=t.val(),i+="[/"+a)}),i+="]"}),i+="[/"+n+"]";break;case"clone_duplicate":e("["+f+"]",".amy-dialog-load").each(function(){var t=e(this),a=t.data("clone-id");i+="["+a,e("["+u+"]",t.find(".amy-element").not(".hidden")).each(function(){var t=e(this),n=t.data("clone-atts");"content"!==n?i+=o.validate_atts(n,t):"content"===n&&(i+="]",i+=t.val(),i+="[/"+a)}),i+="]"});break;default:i+="["+n,e("["+s+"]",".amy-dialog-load .amy-element:not(.hidden)").each(function(){var t=e(this),a=t.data("atts");"content"!==a?i+=o.validate_atts(a,t):"content"===a&&(i+="]",i+=t.val(),i+="[/"+n)}),i+="]"}if(m){var h=c.next();h.val(o.insertAtChars(h,i)).trigger("change")}else o.send_to_editor(i,r);a=null,d.dialog("close")});var p=0;d.on("click","#shortcode-clone-button",function(t){t.preventDefault();var a=s.clone().hide();a.find("input:radio").attr("name","_nonce_"+p),e(".amy-shortcode-clone:last").after(a),a.slideDown(100),a.find(".amy-remove-clone").show().on("click",function(e){a.slideUp(100,function(){a.remove()}),e.preventDefault()}),a.AMYFRAMEWORK_DEPENDENCY("sub"),a.AMYFRAMEWORK_RELOAD_PLUGINS(),p++})},o.validate_atts=function(t,i){var o;return i.data("check")!==n&&a===t?"":(a=t,i.closest(".pseudo-field").hasClass("hidden")===!0?"":i.hasClass("pseudo")===!0?"":(o=i.is(":checkbox")||i.is(":radio")?i.is(":checked")?i.val():"":i.val(),i.data("check")!==n&&(o=i.closest(".amy-element").find("input:checked").map(function(){return e(this).val()}).get()),i.hasClass("chosen")&&null===o?" "+t+'=""':null!==o&&o!==n&&""!==o&&0!==o.length?" "+t+'="'+o+'"':""))},o.insertAtChars=function(e,t){var a="undefined"!=typeof e[0].name?e[0]:e;return a.value.length&&"undefined"!=typeof a.selectionStart?(a.focus(),a.value.substring(0,a.selectionStart)+t+a.value.substring(a.selectionEnd,a.value.length)):(a.focus(),t)},o.send_to_editor=function(t,a){var n;if("undefined"!=typeof tinymce&&(n=tinymce.get(a)),n&&!n.isHidden())n.execCommand("mceInsertContent",!1,t);else{var i=e("#"+a);i.val(o.insertAtChars(i,t)).trigger("change")}},o.init()},"function"==typeof Color&&(Color.fn.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var e=parseInt(this._color,10).toString(16);if(this.error)return"";if(e.length<6)for(var t=6-e.length-1;t>=0;t--)e="0"+e;return"#"+e}),e.AMYFRAMEWORK.PARSE_COLOR_VALUE=function(e){var t=e.replace(/\s+/g,""),a=-1!==t.indexOf("rgba")?parseFloat(100*t.replace(/^.*,(.+)\)/,"$1")):100,n=100>a;return{value:t,alpha:a,rgba:n}},e.fn.AMYFRAMEWORK_COLORPICKER=function(){return this.each(function(){var t=e(this);if(t.data("rgba")!==!1){var a=e.AMYFRAMEWORK.PARSE_COLOR_VALUE(t.val());t.wpColorPicker({clear:function(){t.trigger("keyup")},change:function(e,a){var n=a.color.toString();t.closest(".wp-picker-container").find(".amy-alpha-slider-offset").css("background-color",n),t.val(n).trigger("change")},create:function(){var n=t.data("a8cIris"),o=t.closest(".wp-picker-container"),l=e('<div class="amy-alpha-wrap"><div class="amy-alpha-slider"></div><div class="amy-alpha-slider-offset"></div><div class="amy-alpha-text"></div></div>').appendTo(o.find(".wp-picker-holder")),s=l.find(".amy-alpha-slider"),c=l.find(".amy-alpha-text"),r=l.find(".amy-alpha-slider-offset");s.slider({slide:function(e,a){var i=parseFloat(a.value/100);n._color._alpha=i,t.wpColorPicker("color",n._color.toString()),c.text(1>i?i:"")},create:function(){var d=parseFloat(a.alpha/100),u=1>d?d:"";c.text(u),r.css("background-color",a.value),o.on("click",".wp-picker-clear",function(){n._color._alpha=1,c.text("").trigger("change"),s.slider("option","value",100).trigger("slide")}),o.on("click",".wp-picker-default",function(){var a=e.AMYFRAMEWORK.PARSE_COLOR_VALUE(t.data("default-color")),i=parseFloat(a.alpha/100),o=1>i?i:"";n._color._alpha=i,c.text(o),s.slider("option","value",a.alpha).trigger("slide")}),o.on("click",".wp-color-result",function(){l.toggle()}),i.on("click.wpcolorpicker",function(){l.hide()})},value:a.alpha,step:1,min:1,max:100})}})}else t.wpColorPicker({clear:function(){t.trigger("keyup")},change:function(e,a){t.val(a.color.toString()).trigger("change")}})})},e.AMYFRAMEWORK.WIDGET_RELOAD_PLUGINS=function(){e(a).on("widget-added widget-updated",function(e,t){t.AMYFRAMEWORK_RELOAD_PLUGINS(),t.AMYFRAMEWORK_DEPENDENCY()})},e.fn.AMYFRAMEWORK_TOOLTIP=function(){return this.each(function(){var t=o?"right":"left";e(this).amytooltip({html:!0,placement:t,container:"body"})})},e.fn.AMYFRAMEWORK_RELOAD_PLUGINS=function(){return this.each(function(){e(".chosen",this).AMYFRAMEWORK_CHOSEN(),e(".amy-field-image-select",this).AMYFRAMEWORK_IMAGE_SELECTOR(),e(".amy-field-image",this).AMYFRAMEWORK_IMAGE_UPLOADER(),e(".amy-field-gallery",this).AMYFRAMEWORK_IMAGE_GALLERY(),e(".amy-field-sorter",this).AMYFRAMEWORK_SORTER(),e(".amy-field-upload",this).AMYFRAMEWORK_UPLOADER(),e(".amy-field-typography",this).AMYFRAMEWORK_TYPOGRAPHY(),e(".amy-field-color-picker",this).AMYFRAMEWORK_COLORPICKER(),e(".amy-help",this).AMYFRAMEWORK_TOOLTIP()})},e(a).ready(function(){e("#menu-to-edit").AMYFRAMEWORK_MEGAMENU(),e(".amy-framework").AMYFRAMEWORK_TAB_NAVIGATION(),e(".amy-reset-confirm, .amy-import-backup").AMYFRAMEWORK_CONFIRM(),e(".amy-content, .wp-customizer, .widget-content, .amy-taxonomy").AMYFRAMEWORK_DEPENDENCY(),e(".amy-field-group").AMYFRAMEWORK_GROUP(),e(".amy-save").AMYFRAMEWORK_SAVE(),e(".amy-taxonomy").AMYFRAMEWORK_TAXONOMY(),e(".amy-framework, #widgets-right").AMYFRAMEWORK_RELOAD_PLUGINS(),e.AMYFRAMEWORK.ICONS_MANAGER(),e.AMYFRAMEWORK.SHORTCODE_MANAGER(),e.AMYFRAMEWORK.WIDGET_RELOAD_PLUGINS()})}(jQuery,window,document);